[Application]
name = Performance to MIDI alignment
contributor = mdw
creator = mdw
source = https://github.com/trompamusic/trompa-align
subject = Alignment
description = TBD
language = en
id = bd76658c-405b-44a5-aa6c-08e5a4f634b8

[ControlAction]
name = TPL Extract Features
description = This program extracts the IS13 feature set from audio (mp3 or wav)
num_inputs = 2
num_params = 3
num_outputs = 1
id = e95f7c92-26dd-49b2-a42e-cd4fcf9ecaab

[EntryPoint]
name = Performance to MIDI alignment
description = TBD
action_platform = TBD
content_type = application/json
encoding_type = text/html
formatin = text/html
command_line = python3 /trompa-align/scripts/performance_alignment_workflow.py --smatPath /smat/AlignmentTool_v190813 --meiFile {Input1} --performanceMidiFile {Input2} --structureUri {Param1} --solidContainer {Param2} --tpl-out {Output1}
requires_docker = true
docker_image = trompa-align
docker_commands = 
id = e3445e5e-bb17-4e19-8966-dd15c67a1aa3

[Input1]
name = mei file
title = Input mei File
description = The mei file to process
rangeincludes = DigitalDocument
encrypted = False
field = source
id = 7318de34-fe3c-4d9d-93ed-deb8927d789d

[Input2]
name = performance midi file
title = Input mei File
description = The mei file to process
rangeincludes = DigitalDocument
encrypted = False
field = source
id = d4d3e092-bc00-44ae-baec-00d05edf0bc2

[Param1]
name = structureUri
description = structureUri
defaultvalue = None
valuemaxlength = 100
valueminlength = 0
multiplevalues = False
valuename = structureUri
valuepattern = String
valuerequired = True
encrypted = False
field = value
id = d6c2098f-4594-4579-a78e-ee9c7e8c6dc4

[Param2]
name = solidContainer
description = solidContainer
defaultvalue = None
valuemaxlength = 100
valueminlength = 0
multiplevalues = False
valuename = solidContainer
valuepattern = String
valuerequired = True
encrypted = False
field = value
id = eaad42fd-02a8-47e1-85a1-a6c727614d4a

[Param3]
name = output storage
description = contains where the outputs will be stored (solidpos, minio). If has one value, will use the same storage for all outputs. If it's a vector it should contain as many items as the outputs (in the same order defined in this file)
defaultvalue = https://trompa-mtg.upf.edu/data/
valuemaxlength = 100
valueminlength = 0
multiplevalues = True
valuename = output storage
valuepattern = String
valuerequired = True
encrypted = False
field = value
id = 76b0fde4-25d8-4f00-81f0-7d7b3ab53997

[Output1]
name = Alignment file
description = Output Filename
defaultvalue = 
valuemaxlength = 0
valueminlength = 0
multiplevalues = False
valuename = --output
valuepattern = String
valuerequired = True
encrypted = False
mimetype = text/xml
extension = csv
type = DigitalDocument

