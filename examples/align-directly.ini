[Application]
name = Performance to MIDI alignment
contributor = mdw
creator = mdw
source = https://github.com/trompamusic/trompa-align
subject = Alignment
description = TBD
language = en

[ControlAction]
name = TPL Alignment Workflow
description = This workflow aligns a performance (WebMIDI JSON object) to an MEI score
num_inputs = 2
num_params = 5
num_outputs = 0

[EntryPoint]
name = Performance to MIDI alignment
description = TBD
action_platform = TBD
content_type = application/json
encoding_type = text/html
formatin = text/html
command_line = python3 /code/scripts/tpl_entrypoint.py --meiUri {Input1} --meiFile {Input2} --performanceMidiUri {Param1} --isWebMidi True --structureUri {Param2} --performanceContainer {Param3} --audioContainer {Param4} --webId {param5}
requires_docker = true
docker_image = trompa-align
docker_commands = 

[Input1]
name = meiUri
description = URI of the performed MEI file
rangeincludes = MediaObject
encrypted = False
field = sourceuri

[Input2]
name = meiFile
description = URI of the performed MEI file
rangeincludes = MediaObject
encrypted = False
field = contentUrl

[Param1]
name = performanceMidi
description = URI of a performanceMidi JSON object (WebMIDI JSON) in a Solid Pod
defaultvalue = None
multiplevalues = False
valuename = performanceMidi 
valuepattern = String
valuerequired = True
encrypted = False
field = value

[Param2]
name = structureUri
description = URI of the structure description (JSONLD) generated from the MEI file
defaultvalue = None
multiplevalues = False
valuename = structureUri
valuepattern = String
valuerequired = True
encrypted = False
field = value

[Param3]
name = performanceContainer
description = URI of the container within the user's Solid Pod that will receive the performance alignment JSONLD
defaultvalue = None
multiplevalues = False
valuename = performanceContainer
valuepattern = String
valuerequired = True
encrypted = False
field = value

[Param4]
name = audioContainer
description = URI of the container within the user's Solid Pod that will receive the synthesised performance audio 
defaultvalue = None
multiplevalues = False
valuename = audioContainer
valuepattern = String
valuerequired = True
encrypted = False
field = value

[Param5]
name = webId
description = The user's WebID
defaultvalue = None
multiplevalues = False
valuename = webId
valuepattern = String
valuerequired = True
encrypted = True
field = value

